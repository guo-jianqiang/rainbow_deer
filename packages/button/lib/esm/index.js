import React,{useState,useEffect}from"react";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var n,r={},o=Object.keys(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||(r[n]=e[n]);return r}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)n=o[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var classnames=createCommonjsModule(function(e){function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r,o=typeof n;if("string"==o||"number"==o)e.push(n);else if(Array.isArray(n))!n.length||(r=i.apply(null,n))&&e.push(r);else if("object"==o)if(n.toString===Object.prototype.toString)for(var a in n)s.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}var s;s={}.hasOwnProperty,e.exports?e.exports=i.default=i:window.classNames=i});function styleInject(e,t){var n,r=(t=void 0===t?{}:t).insertAt;e&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(t=document.createElement("style")).type="text/css","top"===r&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)))}var css_248z$1=".z-button {\n  --text-color: #161923;\n  --border-color: #d9d9e6;\n  --split-line-color: #eceef2;\n  --primary-color: #0085ff;\n  position: relative;\n  padding: 4px 15px;\n  user-select: none;\n  white-space: nowrap;\n  text-align: center;\n  border: 1px solid var(--border-color);\n  border-radius: 3px;\n  cursor: pointer;\n  background: #fff;\n  transition: all 0.2s ease-in-out;\n  overflow: hidden;\n}\n.z-button:active {\n  transform: translateY(1px);\n}\n.z-button span {\n  display: inline-block;\n}\n.z-button-loading {\n  display: inline-flex !important;\n  margin-right: 4px;\n  vertical-align: -0.16em;\n}\n.z-button:hover {\n  opacity: 0.8;\n}\n.z-button.loading {\n  cursor: inherit;\n  pointer-events: none;\n  opacity: 0.8;\n}\n.z-button.primary {\n  color: var(--primary-color);\n  border: 1px solid var(--primary-color);\n}\n.z-button.emphasize {\n  color: #fff;\n  border-color: var(--primary-color);\n  background: var(--primary-color);\n}\n.z-button.small {\n  padding: 1px 7px;\n  font-size: 12px;\n  height: 24px;\n  line-height: 20px;\n}\n.z-button.normal {\n  font-size: 14px;\n  height: 32px;\n  line-height: 20px;\n}\n.z-button.large {\n  font-size: 16px;\n  padding: 8px 15px;\n  height: 40px;\n  line-height: 22px;\n}\n.z-button[disabled] {\n  color: #00000040;\n  border-color: #d9d9d9;\n  background: #f5f5f5;\n  cursor: not-allowed;\n  opacity: 0.8;\n}\n.z-button-processWrap {\n  --process-percent: 0%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  color: var(--primary-color);\n  background-color: #fff;\n  z-index: 0;\n}\n.z-button-processWrap-process {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: var(--process-percent);\n  transition: width 200ms linear;\n  background-color: #9acfff;\n  z-index: -1;\n}\n";styleInject(css_248z$1);var ESize,css_248z=".z-spinner {\n  animation: rotator 1.4s linear infinite;\n}\n@keyframes rotator {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(270deg);\n  }\n}\n.path {\n  stroke-dasharray: 189;\n  stroke-dashoffset: 0;\n  stroke: var(--primary-color);\n  transform-origin: center;\n  animation: dash 1.4s ease-in-out infinite;\n}\n@keyframes dash {\n  0% {\n    stroke-dashoffset: 189;\n  }\n  50% {\n    stroke-dashoffset: 189 / 4;\n    transform: rotate(135deg);\n  }\n  100% {\n    stroke-dashoffset: 189;\n    transform: rotate(450deg);\n  }\n}\n";styleInject(css_248z),function(e){e[e.large=16]="large",e[e.normal=14]="normal",e[e.small=12]="small"}(ESize=ESize||{});var Spin=function(e){var t=e.size,n=void 0===t?"normal":t,r=e.className,t=e.style,e=e.circleStyle;return React.createElement("svg",{style:t,className:classnames("z-spinner",r),width:ESize[n]+"px",height:ESize[n]+"px",viewBox:"0 0 66 66"},React.createElement("circle",{className:"path",style:e,fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"}))},_excluded=["type","size","prefixCls","className","style","block","autoInsertSpaceInButton","loading","percent","percentText","fullPercentText","children"],circleStyle={emphasize:{stroke:"#fff"}},rxTwoCNChar=/^[\u4e00-\u9fa5]{2}$/,isTwoCNChar=rxTwoCNChar.test.bind(rxTwoCNChar);function isString(e){return"string"==typeof e}function isReactFragment(e){return React.isValidElement(e)&&e.type===React.Fragment}function insertSpace(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(null!=e){t=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&isString(e.type)&&isTwoCNChar(e.props.children)?React.cloneElement(e,{children:e.props.children.split("").join(t)}):"string"==typeof e?isTwoCNChar(e)?React.createElement("span",null,e.split("").join(t)):React.createElement("span",null,e):isReactFragment(e)?React.createElement("span",null,e):e}}var Button=function(e){var t=e.type,n=void 0===t?"":t,r=e.size,o=void 0===r?"normal":r,a=e.prefixCls,i=void 0===a?"z":a,s=e.className,l=e.style,c=e.block,p=void 0!==c&&c,u=e.autoInsertSpaceInButton,f=void 0===u||u,t=e.loading,r=e.percent,d=void 0===r?0:r,a=e.percentText,c=void 0===a?"下载中":a,u=e.fullPercentText,r=void 0===u?"已下载":u,a=e.children,u=_objectWithoutProperties(e,_excluded),e=_slicedToArray(useState(d),2),y=e[0],m=e[1],e=classnames("".concat(i,"-button"),o,n,s,{loading:t||0!==y});useEffect(function(){100===y&&setTimeout(function(){m(0)},1e3)},[y]),useEffect(function(){m(100<d?100:d)},[d]);s={"--process-percent":y+"%"};return React.createElement("button",_extends({className:e,style:_objectSpread2({display:p?"block":"inline-block",width:p?"100%":"auto"},l)},u),y?React.createElement("div",{className:classnames("".concat(i,"-button-processWrap"),{})},React.createElement("span",null,y<100?c:r),React.createElement("div",{style:s,className:"".concat(i,"-button-processWrap-process")})):null,t&&React.createElement("span",{className:"".concat(i,"-button-loading")},React.createElement(Spin,{size:o,circleStyle:circleStyle[n]})),insertSpace(a,f))};export{Button as default};
